[{"D:\\Kapil D\\Personal\\DecentralizedDeliveries\\client\\src\\index.js":"1","D:\\Kapil D\\Personal\\DecentralizedDeliveries\\client\\src\\App.jsx":"2","D:\\Kapil D\\Personal\\DecentralizedDeliveries\\client\\src\\components\\Footer.jsx":"3","D:\\Kapil D\\Personal\\DecentralizedDeliveries\\client\\src\\contexts\\EthContext\\index.js":"4","D:\\Kapil D\\Personal\\DecentralizedDeliveries\\client\\src\\contexts\\EthContext\\useEth.js":"5","D:\\Kapil D\\Personal\\DecentralizedDeliveries\\client\\src\\contexts\\EthContext\\EthContext.js":"6","D:\\Kapil D\\Personal\\DecentralizedDeliveries\\client\\src\\contexts\\EthContext\\state.js":"7","D:\\Kapil D\\Personal\\DecentralizedDeliveries\\client\\src\\contexts\\EthContext\\EthProvider.jsx":"8","D:\\Kapil D\\Personal\\DecentralizedDeliveries\\client\\src\\components\\RequestDelivery.jsx":"9","D:\\Kapil D\\Personal\\DecentralizedDeliveries\\client\\src\\components\\AcceptDelivery.jsx":"10","D:\\Kapil D\\Personal\\DecentralizedDeliveries\\client\\src\\components\\ProclaimDelivery.jsx":"11"},{"size":254,"mtime":1656324156974,"results":"12","hashOfConfig":"13"},{"size":1704,"mtime":1660641152932,"results":"14","hashOfConfig":"13"},{"size":473,"mtime":1655358856000,"results":"15","hashOfConfig":"16"},{"size":181,"mtime":1655358856000,"results":"17","hashOfConfig":"13"},{"size":145,"mtime":1655358856000,"results":"18","hashOfConfig":"13"},{"size":104,"mtime":1655358856000,"results":"19","hashOfConfig":"13"},{"size":424,"mtime":1655358856000,"results":"20","hashOfConfig":"13"},{"size":1722,"mtime":1656320600831,"results":"21","hashOfConfig":"13"},{"size":7646,"mtime":1660642578541,"results":"22","hashOfConfig":"13"},{"size":2257,"mtime":1660642310474,"results":"23","hashOfConfig":"13"},{"size":3058,"mtime":1660642347400,"results":"24","hashOfConfig":"13"},{"filePath":"25","messages":"26","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"1u5rh6b",{"filePath":"27","messages":"28","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"29"},{"filePath":"30","messages":"31","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"10lmr2g",{"filePath":"32","messages":"33","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"34","messages":"35","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"36","messages":"37","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"38","messages":"39","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"40","messages":"41","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"42","messages":"43","errorCount":0,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"44","messages":"45","errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"46"},{"filePath":"47","messages":"48","errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"49"},"D:\\Kapil D\\Personal\\DecentralizedDeliveries\\client\\src\\index.js",[],"D:\\Kapil D\\Personal\\DecentralizedDeliveries\\client\\src\\App.jsx",["50"],"import { EthProvider } from \"./contexts/EthContext\";\nimport \"./App.css\";\nimport AcceptDelivery from \"./components/AcceptDelivery\";\nimport RequestDelivery from \"./components/RequestDelivery\";\nimport ProclaimDelivery from \"./components/ProclaimDelivery\";\nimport {useState} from \"react\";\nrequire('dotenv').config()\n\n\nfunction App() {\n  const domain = \"http://localhost:3000\"\n  let location  = window.location.href\n  const [request, changeRequest] = useState(location.slice(domain.length, location.length).toLowerCase())\n  const [mining, setMining] = useState(false)\n\n  function getComponent(request) {\n    if (request === '/') {\n      changeRequest(\"/#/\")\n    }\n    if (request === '/#/') {\n      return <RequestDelivery setMining={setMining} />\n    }\n    if (request === '/#/acceptdelivery') {\n      return <AcceptDelivery setMining={setMining} />\n    }\n    if (request === '/#/proclaimdelivery') {\n      return <ProclaimDelivery setMining={setMining} />\n    }\n  }\n\n  return (\n      <EthProvider>\n      <div id=\"App\" style={{position: \"relative\"}}>\n        <div id=\"shadowLayer\" className={mining?\"is-visible\":\"\"}></div>\n        <div className=\"topnav\" style={{position: \"absolute\", zIndex: \"2\", width: \"100%\"}}>\n          <a href=\"/#/\" onClick={() => changeRequest(\"/#/\")}>Home</a>\n          <a href=\"/#/acceptdelivery\" onClick={() => changeRequest(\"/#/acceptdelivery\")}>Accept Delivery</a>\n          <a href=\"/#/proclaimdelivery\" onClick={() => changeRequest(\"/#/proclaimdelivery\")}>Proclaims</a>\n          <a href=\"\">About</a>\n        </div>\n          <div className=\"container\">\n                {getComponent(request)}\n          </div>\n        </div>\n      </EthProvider>\n  );\n}\n\n\n\nexport default App;\n","D:\\Kapil D\\Personal\\DecentralizedDeliveries\\client\\src\\components\\Footer.jsx",[],"D:\\Kapil D\\Personal\\DecentralizedDeliveries\\client\\src\\contexts\\EthContext\\index.js",[],"D:\\Kapil D\\Personal\\DecentralizedDeliveries\\client\\src\\contexts\\EthContext\\useEth.js",[],"D:\\Kapil D\\Personal\\DecentralizedDeliveries\\client\\src\\contexts\\EthContext\\EthContext.js",[],"D:\\Kapil D\\Personal\\DecentralizedDeliveries\\client\\src\\contexts\\EthContext\\state.js",[],"D:\\Kapil D\\Personal\\DecentralizedDeliveries\\client\\src\\contexts\\EthContext\\EthProvider.jsx",[],"D:\\Kapil D\\Personal\\DecentralizedDeliveries\\client\\src\\components\\RequestDelivery.jsx",["51","52","53","54","55","56","57","58","59"],"D:\\Kapil D\\Personal\\DecentralizedDeliveries\\client\\src\\components\\AcceptDelivery.jsx",["60","61","62"],"import React, {useRef, useState} from 'react'\r\nimport useEth from \"../contexts/EthContext/useEth\";\r\nimport Axios from 'axios'\r\nimport '../App.css'\r\nrequire('dotenv').config()\r\n\r\n\r\nconst serverUrl = \"http://localhost:3000\" + '/deliveries/'\r\nlet userAddress = null;\r\n\r\nconst AcceptDelivery = ({ setMining }) => {\r\n  \r\n    const { state: { contract, accounts } } = useEth()\r\n    const [deliveryRequests, setDeliveryRequests] = useState([])\r\n    if(accounts != null) {\r\n      userAddress = accounts[0]\r\n    }\r\n\r\n    if(userAddress != null) {\r\n      Axios.get(serverUrl+'stage/0').then(response => {\r\n        setDeliveryRequests(response.data)\r\n      })\r\n    }\r\n\r\n    const acceptDelivery = async (index) => {\r\n      const hash = deliveryRequests[index]._id\r\n      if(hash === '') {\r\n        alert('There was a problem, please try again.');\r\n        return;\r\n      }\r\n      // showing shadowLayer\r\n      setMining(true)\r\n      try {\r\n        await contract.methods.acceptDelivery(hash).send({from: accounts[0]}).then((response) => {\r\n          console.log(response)\r\n          alert(\"Accepted request. Head over to the Proclaims page once you make the delivery.\")\r\n        })\r\n      } catch(err) {\r\n        alert(err)\r\n      }\r\n      setMining(false)\r\n    }\r\n\r\n  return (\r\n    <div id='wrapper'>\r\n        <h2>Make a Delivery</h2>\r\n        <table id='deliveries'>\r\n          <tr>\r\n            <th>Index</th>\r\n            <th>Item</th>\r\n            <th>Pickup From</th>\r\n            <th>Deliver To</th>\r\n            <th>Reward(in wei)</th>\r\n            <th>Accept Delivery</th>\r\n          </tr>\r\n          {deliveryRequests != null ? deliveryRequests.map((req, index) =>  {\r\n            return (\r\n              <tr>\r\n                <td>{index+1}</td>\r\n                <td>{req.item}</td>\r\n                <td>{req.from}</td>\r\n                <td>{req.to}</td>\r\n                <td>{req.payment}</td>\r\n                <td><button onClick={() => acceptDelivery(index)}>Accept</button></td>\r\n              </tr>\r\n            )\r\n          }): console.log(\"deliveryRequests was null.\")}\r\n        </table>\r\n        {deliveryRequests != null ? deliveryRequests.length == 0 ? \"No delivery requests yet.\" : null : null}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default AcceptDelivery","D:\\Kapil D\\Personal\\DecentralizedDeliveries\\client\\src\\components\\ProclaimDelivery.jsx",["63","64","65"],"import React, {useState} from 'react'\r\nimport useEth from \"../contexts/EthContext/useEth\";\r\nimport Axios from 'axios'\r\nimport '../App.css'\r\nrequire('dotenv').config()\r\n\r\n\r\nconst serverUrl = \"http://localhost:3000\" + '/deliveries/'\r\nlet userAddress = null;\r\nlet listeningToCompleteEvent = false;\r\n\r\nconst ProclaimDelivery = ({ setMining }) => {\r\n  \r\n    const { state: { contract, accounts } } = useEth();\r\n    const [deliveryRequests, setDeliveryRequests] = useState([])\r\n    if(accounts != null) {\r\n      userAddress = accounts[0]\r\n    }\r\n\r\n    if(userAddress != null) {\r\n      Axios.get(serverUrl+'deliveryMan/' + userAddress).then(response => {\r\n        setDeliveryRequests(response.data)\r\n      })\r\n    }\r\n\r\n    const handleComplete = (log) => {\r\n      let requestId = log.returnValues.requestId\r\n      let tempRequests = deliveryRequests\r\n      tempRequests.forEach((request, index) => {\r\n        if (request._id == requestId) {\r\n          alert(\"The Delivery has been confirmed. The reward has been transferred to your account.\")\r\n        }\r\n      }) \r\n    }\r\n\r\n    // starting listener for Confirmation Event.\r\n    if (contract != null && !listeningToCompleteEvent) {\r\n      window.completeEvent = contract.events.CompleteEvent()\r\n      .on(\"data\", function(log) {\r\n        handleComplete(log);\r\n      })\r\n      listeningToCompleteEvent = true;\r\n    }\r\n\r\n    const proclaimDelivery = async (index) => {\r\n      const hash = deliveryRequests[index]._id\r\n      if(hash === '') {\r\n        alert('There was some problem. Please try again.');\r\n        return;\r\n      }\r\n      setMining(true)\r\n      try {\r\n        await contract.methods.allegeDelivery(hash).send({from: accounts[0]}).then((response) => {\r\n          console.log(response)\r\n          alert(\"Waiting for confirmation from customer. Money will be transferred to your account after confirmation.\")\r\n        })\r\n      } catch(err) {\r\n        alert(err)\r\n      }\r\n      setMining(false)\r\n    }\r\n\r\n  return (\r\n    <div id='wrapper'>\r\n        <h2>Proclaim your delivery</h2>\r\n        <table id='deliveries'>\r\n          <thead>\r\n            <tr>\r\n              <th>Index</th>\r\n              <th>Item</th>\r\n              <th>Pickup From</th>\r\n              <th>Deliver To</th>\r\n              <th>Reward</th>\r\n              <th>Accept Delivery</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n          {deliveryRequests != null ? deliveryRequests.map((req, index) =>  {\r\n            return (\r\n              <tr>\r\n                <td>{index+1}</td>\r\n                <td>{req.item}</td>\r\n                <td>{req.from}</td>\r\n                <td>{req.to}</td>\r\n                <td>{req.payment}</td>\r\n                <td><button onClick={() => proclaimDelivery(index)}>Proclaim</button></td>\r\n              </tr>\r\n            )\r\n          }): console.log(\"deliveryRequests was null.\")}\r\n          </tbody>\r\n        </table>\r\n        {deliveryRequests != null ? deliveryRequests.length == 0 ? \"No delivery requests yet.\" : null : null}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ProclaimDelivery",{"ruleId":"66","severity":1,"message":"67","line":39,"column":11,"nodeType":"68","endLine":39,"endColumn":22},{"ruleId":"69","severity":1,"message":"70","line":8,"column":43,"nodeType":"71","messageId":"72","endLine":8,"endColumn":44},{"ruleId":"73","severity":1,"message":"74","line":31,"column":26,"nodeType":"71","messageId":"75","endLine":31,"endColumn":28},{"ruleId":"73","severity":1,"message":"74","line":34,"column":27,"nodeType":"71","messageId":"75","endLine":34,"endColumn":29},{"ruleId":"76","severity":1,"message":"77","line":51,"column":6,"nodeType":"78","endLine":51,"endColumn":16,"suggestions":"79"},{"ruleId":"73","severity":1,"message":"74","line":145,"column":23,"nodeType":"71","messageId":"75","endLine":145,"endColumn":25},{"ruleId":"73","severity":1,"message":"74","line":158,"column":23,"nodeType":"71","messageId":"75","endLine":158,"endColumn":25},{"ruleId":"73","severity":1,"message":"74","line":227,"column":39,"nodeType":"71","messageId":"75","endLine":227,"endColumn":41},{"ruleId":"73","severity":1,"message":"74","line":227,"column":77,"nodeType":"71","messageId":"75","endLine":227,"endColumn":79},{"ruleId":"73","severity":1,"message":"74","line":227,"column":116,"nodeType":"71","messageId":"75","endLine":227,"endColumn":118},{"ruleId":"80","severity":1,"message":"81","line":1,"column":16,"nodeType":"82","messageId":"83","endLine":1,"endColumn":22},{"ruleId":"69","severity":1,"message":"70","line":8,"column":43,"nodeType":"71","messageId":"72","endLine":8,"endColumn":44},{"ruleId":"73","severity":1,"message":"74","line":69,"column":61,"nodeType":"71","messageId":"75","endLine":69,"endColumn":63},{"ruleId":"69","severity":1,"message":"70","line":8,"column":43,"nodeType":"71","messageId":"72","endLine":8,"endColumn":44},{"ruleId":"73","severity":1,"message":"74","line":30,"column":25,"nodeType":"71","messageId":"75","endLine":30,"endColumn":27},{"ruleId":"73","severity":1,"message":"74","line":92,"column":61,"nodeType":"71","messageId":"75","endLine":92,"endColumn":63},"jsx-a11y/anchor-is-valid","The href attribute requires a valid value to be accessible. Provide a valid, navigable address as the href value. If you cannot provide a valid href, but still need the element to resemble a link, use a button and change it with appropriate styles. Learn more: https://github.com/jsx-eslint/eslint-plugin-jsx-a11y/blob/HEAD/docs/rules/anchor-is-valid.md","JSXOpeningElement","no-useless-concat","Unexpected string concatenation of literals.","BinaryExpression","unexpectedConcat","eqeqeq","Expected '===' and instead saw '=='.","unexpected","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'accounts'. Either include it or remove the dependency array.","ArrayExpression",["84"],"no-unused-vars","'useRef' is defined but never used.","Identifier","unusedVar",{"desc":"85","fix":"86"},"Update the dependencies array to be: [accounts, contract]",{"range":"87","text":"88"},[1493,1503],"[accounts, contract]"]