{"ast":null,"code":"var _jsxFileName = \"D:\\\\Kapil D\\\\Personal\\\\DecentralizedDeliveries\\\\client\\\\src\\\\components\\\\AcceptDelivery.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useRef, useState } from 'react';\nimport useEth from \"../contexts/EthContext/useEth\";\nimport Axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst serverUrl = 'http://localhost:3000/deliveries/';\nlet userAddress = null;\nlet setRequests = false;\n\nconst AcceptDelivery = () => {\n  _s();\n\n  const {\n    state: {\n      contract,\n      accounts\n    }\n  } = useEth();\n  const [deliveryRequests, setDeliveryRequests] = useState([]);\n\n  if (accounts != null) {\n    userAddress = accounts[0];\n  }\n  /*if(userAddress != null) {\r\n    Axios.get(serverUrl+'stage/0').then(response => {\r\n      setDeliveryRequests(response.data)\r\n    })\r\n  }*/\n\n\n  const deliveryHash = useRef('');\n\n  const acceptDelivery = async index => {\n    const hash = deliveryRequests[index]._id;\n\n    if (hash === '') {\n      alert('There was a problem, please try again.');\n      return;\n    }\n\n    try {\n      await contract.methods.acceptDelivery(hash).send({\n        from: accounts[0]\n      }).then(response => {\n        console.log(response);\n      });\n    } catch (err) {\n      alert(err);\n    }\n  };\n\n  if (!setRequests) {\n    setDeliveryRequests([{\n      \"item\": \"thisitem\",\n      \"from\": \"fromplace\",\n      \"to\": \"toPlace\",\n      \"payment\": \"100000000000000\",\n      \"_id\": \"ksasdnasdaiadaskjasaksjvbi\"\n    }, {\n      \"item\": \"someItem\",\n      \"from\": \"someFrom\",\n      \"to\": \"someTo\",\n      \"payment\": \"100000000000000\",\n      \"_id\": \"masnsnetionsllasdnosdjsnkto\"\n    }]);\n    setRequests = true;\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Make a Delivery\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n      style: {\n        border: \"1px solid black\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n        children: [/*#__PURE__*/_jsxDEV(\"th\", {\n          style: {\n            border: \"1px solid black\",\n            padding: \"10px\"\n          },\n          children: \"Index\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n          style: {\n            border: \"1px solid black\",\n            padding: \"10px\"\n          },\n          children: \"Item\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n          style: {\n            border: \"1px solid black\",\n            padding: \"10px\"\n          },\n          children: \"Pickup From\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n          style: {\n            border: \"1px solid black\",\n            padding: \"10px\"\n          },\n          children: \"Deliver To\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n          style: {\n            border: \"1px solid black\",\n            padding: \"10px\"\n          },\n          children: \"Reward\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n          style: {\n            border: \"1px solid black\",\n            padding: \"10px\"\n          },\n          children: \"Accept Delivery\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 11\n      }, this), deliveryRequests != null ? deliveryRequests.map((req, index) => {\n        return /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n            style: {\n              border: \"1px solid black\",\n              padding: \"10px\"\n            },\n            children: index + 1\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            style: {\n              border: \"1px solid black\",\n              padding: \"3px\"\n            },\n            children: req.item\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            style: {\n              border: \"1px solid black\",\n              padding: \"3px\"\n            },\n            children: req.from\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            style: {\n              border: \"1px solid black\",\n              padding: \"3px\"\n            },\n            children: req.to\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            style: {\n              border: \"1px solid black\",\n              padding: \"3px\"\n            },\n            children: req.payment\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            style: {\n              border: \"1px solid black\",\n              padding: \"10px\"\n            },\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => acceptDelivery(index),\n              children: \"Accept\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 79,\n              columnNumber: 74\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 15\n        }, this);\n      }) : console.log(\"deliveryRequests was null.\")]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 9\n    }, this), deliveryRequests != null ? deliveryRequests.length == 0 ? \"No delivery requests yet.\" : null : null]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 5\n  }, this);\n};\n\n_s(AcceptDelivery, \"isPMOCMjpWstKuHSVGfvlBcFGbU=\", false, function () {\n  return [useEth];\n});\n\n_c = AcceptDelivery;\nexport default AcceptDelivery;\n\nvar _c;\n\n$RefreshReg$(_c, \"AcceptDelivery\");","map":{"version":3,"names":["React","useRef","useState","useEth","Axios","serverUrl","userAddress","setRequests","AcceptDelivery","state","contract","accounts","deliveryRequests","setDeliveryRequests","deliveryHash","acceptDelivery","index","hash","_id","alert","methods","send","from","then","response","console","log","err","border","padding","map","req","item","to","payment","length"],"sources":["D:/Kapil D/Personal/DecentralizedDeliveries/client/src/components/AcceptDelivery.jsx"],"sourcesContent":["import React, {useRef, useState} from 'react'\r\nimport useEth from \"../contexts/EthContext/useEth\";\r\nimport Axios from 'axios'\r\n\r\nconst serverUrl = 'http://localhost:3000/deliveries/'\r\nlet userAddress = null;\r\nlet setRequests = false;\r\n\r\nconst AcceptDelivery = () => {\r\n  \r\n    const { state: { contract, accounts } } = useEth()\r\n    const [deliveryRequests, setDeliveryRequests] = useState([])\r\n    if(accounts != null) {\r\n      userAddress = accounts[0]\r\n    }\r\n\r\n    /*if(userAddress != null) {\r\n      Axios.get(serverUrl+'stage/0').then(response => {\r\n        setDeliveryRequests(response.data)\r\n      })\r\n    }*/\r\n\r\n    const deliveryHash = useRef('');\r\n\r\n    const acceptDelivery = async (index) => {\r\n      const hash = deliveryRequests[index]._id\r\n      if(hash === '') {\r\n        alert('There was a problem, please try again.');\r\n        return;\r\n      }\r\n      try {\r\n        await contract.methods.acceptDelivery(hash).send({from: accounts[0]}).then((response) => {\r\n          console.log(response)\r\n        })\r\n      } catch(err) {\r\n        alert(err)\r\n      }\r\n    }\r\nif(! setRequests) {\r\n  setDeliveryRequests([\r\n    {\r\n      \"item\": \"thisitem\",\r\n      \"from\": \"fromplace\",\r\n      \"to\": \"toPlace\",\r\n      \"payment\": \"100000000000000\",\r\n      \"_id\": \"ksasdnasdaiadaskjasaksjvbi\"\r\n    }, \r\n    {\r\n      \"item\": \"someItem\",\r\n      \"from\": \"someFrom\",\r\n      \"to\": \"someTo\",\r\n      \"payment\": \"100000000000000\",\r\n      \"_id\": \"masnsnetionsllasdnosdjsnkto\"\r\n    }\r\n  ])\r\n  setRequests = true;\r\n}\r\n\r\n  return (\r\n    <div>\r\n        <h1>Make a Delivery</h1>\r\n        <table style={{border: \"1px solid black\"}}>\r\n          <tr>\r\n            <th style={{border: \"1px solid black\", padding: \"10px\"}}>Index</th>\r\n            <th style={{border: \"1px solid black\", padding: \"10px\"}}>Item</th>\r\n            <th style={{border: \"1px solid black\", padding: \"10px\"}}>Pickup From</th>\r\n            <th style={{border: \"1px solid black\", padding: \"10px\"}}>Deliver To</th>\r\n            <th style={{border: \"1px solid black\", padding: \"10px\"}}>Reward</th>\r\n            <th style={{border: \"1px solid black\", padding: \"10px\"}}>Accept Delivery</th>\r\n          </tr>\r\n          {deliveryRequests != null ? deliveryRequests.map((req, index) =>  {\r\n            return (\r\n              <tr>\r\n                <td style={{border: \"1px solid black\", padding: \"10px\"}}>{index+1}</td>\r\n                <td style={{border: \"1px solid black\", padding: \"3px\"}}>{req.item}</td>\r\n                <td style={{border: \"1px solid black\", padding: \"3px\"}}>{req.from}</td>\r\n                <td style={{border: \"1px solid black\", padding: \"3px\"}}>{req.to}</td>\r\n                <td style={{border: \"1px solid black\", padding: \"3px\"}}>{req.payment}</td>\r\n                <td style={{border: \"1px solid black\", padding: \"10px\"}}><button onClick={() => acceptDelivery(index)}>Accept</button></td>\r\n              </tr>\r\n            )\r\n          }): console.log(\"deliveryRequests was null.\")}\r\n        </table>\r\n        {deliveryRequests != null ? deliveryRequests.length == 0 ? \"No delivery requests yet.\" : null : null}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default AcceptDelivery"],"mappings":"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"},"metadata":{},"sourceType":"module"}